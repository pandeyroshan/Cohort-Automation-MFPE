<!-- <!DOCTYPE html>
<html>
<body>
	<div id="foo">Create Dynamic Forms</div>

	<div id="inputBundle1">
		<input type="text" id="text1" name="textData[]" class="textInput">
		
		<select name="numData[]" id="num1" class="numberInput">
		  <option value="text">Textual</option>
		  <option value="number">Numeric</option>
		</select>
	</div>
	<br>
	<button type="button" onClick="addNewNode()" value="Add New">Add New</button>
	<button type="button" onClick="removeNode()">Remove</button>
	<button type="button" onClick="consolidateInputBundle()" value="Add New">Submit</button>

	<br>
	<hr>
	<br>

	<p id="par"></p>
	
	<script>
		var totalNodes=1;

		function insertAfter(referenceNode, newNode) {
		  referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);
		}

		function addNewNode(){
			totalNodes++;
			var instance = document.getElementById("inputBundle1");
			var cloneInstance = instance.cloneNode(true);
			cloneInstance.id = "inputBundle"+totalNodes;
			var div = document.getElementById("inputBundle"+(totalNodes-1));
			insertAfter(div, cloneInstance);

			var x = document.getElementById("inputBundle"+totalNodes).querySelectorAll(".textInput"); 
			x[0].value = '';
			x[0].id = 'text'+totalNodes;

			var y = document.getElementById("inputBundle"+totalNodes).querySelectorAll(".numberInput"); 
			y[0].value = '';
			y[0].id = 'num'+totalNodes;
		}

		function removeNode(){
			if(totalNodes>1) {
				var elem = document.getElementById("inputBundle"+totalNodes);
	  			elem.remove();
	  			totalNodes--;
  			}
		}

		function consolidateInputBundle(){
			var textInputs = document.getElementsByName('textData[]');
			var numInputs = document.getElementsByName('numData[]');
			var k = "";

            var form = document.createElement("form");
		    form.setAttribute("method", "post");
		    form.setAttribute("action", "http://127.0.0.1:8000/try");
		    form.style.visibility = 'hidden';

		    var FN = document.createElement("input");
		    FN.setAttribute("type", "hidden");
			FN.setAttribute("name", "totalNodes");
			FN.setAttribute("value", totalNodes);

			form.appendChild(FN);
  
            for (var i = 0; i < textInputs.length; i++) {
                var a = textInputs[i];
                var b = numInputs[i];
                console.log(a.value);
                console.log(b.value);
                
                var FN1 = document.createElement("input");
		    	FN1.setAttribute("type", "text");
			    FN1.setAttribute("name", "text"+i);
			    FN1.setAttribute("value", a.value);

                var FN2 = document.createElement("input");
		    	FN2.setAttribute("type", "text");
			    FN2.setAttribute("name", "type"+i);
			    FN2.setAttribute("value", b.value);
			    
			    form.appendChild(FN1);
			    form.appendChild(FN2);
            }
		  	
		    document.body.appendChild(form);
		    form.submit();
		}
	</script>
	
</body>
</html> -->

<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.gstatic.com">
	<link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@300&display=swap" rel="stylesheet">

    <title>Cohort Automation</title>
  </head>
  <body style="font-family: 'Nunito Sans', sans-serif;">

  	<nav class="navbar navbar-expand-lg navbar-dark bg-dark shadow-lg p-2 mb-5 rounded">
	  <div class="container-fluid">
	    <a class="navbar-brand" href="#">Cohort Automation</a>
	    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
	      <span class="navbar-toggler-icon"></span>
	    </button>
	    <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
	      <ul class="navbar-nav">
	        <li class="nav-item">
	          <a class="nav-link active" aria-current="page" href="#">Welcome Roshan</a>
	        </li>
	        <li class="nav-item">
	          <a class="nav-link active" href="#">Notifications<sup>&#x1F534;</sup></a>
	        </li>
	        <li class="nav-item">
	          <a class="nav-link active" href="#">Change Password</a>
	        </li>
	        <li class="nav-item">
	          <a class="nav-link active" href="#">Logout</a>
	        </li>
	      </ul>
	    </div>
	  </div>
	</nav>

<div class="container-fluid">
	<div class="card mt-4">
		  <div class="card-header text-center">
		    Create Surveys
		  </div>
		  <div class="card-body">
		  	
		  	<label>Survey Name</label>
		  	<input class="form-control" type="text" name="surveyName" id="surveyName" placeholder="Provide a survey name">
		  	<label class="mt-2">Survey start date</label>
		  	<input class="form-control" type="datetime-local" name="startDate" id="startDate" placeholder="Provide a survey name">
		  	<label class="mt-2">Survey end date</label>
		  	<input class="form-control" type="datetime-local" name="endDate" id="endDate" placeholder="Provide a survey name">
		  	<hr style="border-top: 2px solid red;">

		    <div id="inputBundle1" class="form-group">
		    	<label for="exampleInputEmail1 mb-3" >Question Text</label>
				<input type="text" id="text1" name="textData[]" class="textInput form-control mb-3" placeholder="Question Text">
				

		    	<label for="exampleInputEmail1">Question Type</label>
				<select name="numData[]" id="num1" class="numberInput form-control">
				  <option value="text">Textual</option>
				  <option value="number">Numeric</option>
				</select>
				<hr style="border-top: 1px dashed red;">
			</div>
			
			<br>
			
			<button class="btn btn-info" type="button" onClick="addNewNode()" value="Add New">Add New</button>
			<button class="btn btn-danger" type="button" onClick="removeNode()">Remove</button>
			<button class="btn btn-success" type="button" onClick="consolidateInputBundle()" value="Add New">Submit</button>
		  </div>
		</div>
	</div>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>

    <script>
		var totalNodes=1;

		function insertAfter(referenceNode, newNode) {
		  referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);
		}

		function addNewNode(){
			totalNodes++;
			var instance = document.getElementById("inputBundle1");
			var cloneInstance = instance.cloneNode(true);
			cloneInstance.id = "inputBundle"+totalNodes;
			var div = document.getElementById("inputBundle"+(totalNodes-1));
			insertAfter(div, cloneInstance);

			var x = document.getElementById("inputBundle"+totalNodes).querySelectorAll(".textInput"); 
			x[0].value = '';
			x[0].id = 'text'+totalNodes;

			var y = document.getElementById("inputBundle"+totalNodes).querySelectorAll(".numberInput"); 
			y[0].value = '';
			y[0].id = 'num'+totalNodes;
		}

		function removeNode(){
			if(totalNodes>1) {
				var elem = document.getElementById("inputBundle"+totalNodes);
	  			elem.remove();
	  			totalNodes--;
  			}
		}

		function consolidateInputBundle(){
			var textInputs = document.getElementsByName('textData[]');
			var numInputs = document.getElementsByName('numData[]');
			var k = "";

            var form = document.createElement("form");
		    form.setAttribute("method", "post");
		    form.setAttribute("action", "http://127.0.0.1:8000/try");
		    form.style.visibility = 'hidden';

		    var FN = document.createElement("input");
		    FN.setAttribute("type", "hidden");
			FN.setAttribute("name", "totalNodes");
			FN.setAttribute("value", totalNodes);

			var surveyName = document.createElement("input");
			surveyName.setAttribute("type", "text");
			surveyName.setAttribute("name", "surveyName");
			surveyName.setAttribute("value", document.getElementById("surveyName").value);

			var startDate = document.createElement("input");
			startDate.setAttribute("type", "datetime-local");
			startDate.setAttribute("name", "startDate");
			startDate.setAttribute("value", document.getElementById("startDate").value);

			var endDate = document.createElement("input");
			endDate.setAttribute("type", "datetime-local");
			endDate.setAttribute("name", "endDate");
			endDate.setAttribute("value", document.getElementById("endDate").value);

			form.appendChild(FN);
			form.appendChild(surveyName);
			form.appendChild(startDate);
			form.appendChild(endDate);

  
            for (var i = 0; i < textInputs.length; i++) {
                var a = textInputs[i];
                var b = numInputs[i];
                console.log(a.value);
                console.log(b.value);
                
                var FN1 = document.createElement("input");
		    	FN1.setAttribute("type", "text");
			    FN1.setAttribute("name", "text"+i);
			    FN1.setAttribute("value", a.value);

                var FN2 = document.createElement("input");
		    	FN2.setAttribute("type", "text");
			    FN2.setAttribute("name", "type"+i);
			    FN2.setAttribute("value", b.value);
			    
			    form.appendChild(FN1);
			    form.appendChild(FN2);
            }
		  	
		    document.body.appendChild(form);
		    form.submit();
		}
	</script>
  </body>
</html>